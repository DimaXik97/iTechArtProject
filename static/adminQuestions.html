<!DOCTYPE html>
<html>
<head>
    <title>Главная</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script>
        function addQuestions(e){
            e.preventDefault();
            console.log("OK");
            var questions=document.getElementsByClassName("question");
            console.log(questions[questions.length-1]);
            mainDiv=document.getElementById("questionForm");
            newQuestions=document.createElement('div');
            newQuestions.setAttribute('class', "question");
            headQuestions=document.createElement('h2');
            headQuestions.innerHTML='Новый вопрос<span onclick="change(event)"> &#9998;</span> <span onclick="remove(event)">&#10006;</span>'
            fieldset=document.createElement("fieldset");
            textarea=document.createElement("textarea");
            fieldset.appendChild(textarea);
            newQuestions.appendChild(headQuestions);
            newQuestions.appendChild(fieldset);
            mainDiv.insertBefore(newQuestions,questions[questions.length-1].nextSibling);
        }
        function remove(e){
            console.log("remove");
            result = confirm("Вы уверены?");
            if(result)
                e.target.parentNode.parentNode.remove();
        }
        function change(e){
            e.target.parentNode.innerHTML="<form><input type='text'><input type='submit' value='OK'><button>Отмена</button></form>";
        }
        function changeType(element){
            elementClass=element.parentNode.getAttribute("class");
            elementsP=element.parentNode.getElementsByTagName('p');
            console.log(element)
            switch(element.value){
                case "1":{
                    element.parentNode.innerHTML="OK1";
                    break;
                }
                case "2":{
                    element.parentNode.innerHTML="OK2";
                    break;
                }
                case "3":{
                    while(elementsP.length){
                        elementsP[0].remove();
                    }
                    newTagP=document.createElement('p');
                    newTagTA=document.createElement('textarea');
                    newTagTA.setAttribute("cols","40")
                    newTagTA.setAttribute("rows","3")
                    newTagTA.setAttribute("resize","vertical")
                    newTagP.appendChild(newTagTA);
                    element.parentNode.appendChild(newTagP);
                }
            }
        }
    </script>
</head>
<body>
    <header>
        <div class="logo">
            <img src="img/logo.png"/>
        </div>
        <div class="linksHeader">
            <ul>
                <li>
                    <a href="userPage.html">Главная</a>
                </li>
                <li>
                    <a href="AboutPage.html">О компании</a>
                </li>
            </ul>
        </div>
        <div class="btmControl">
            <span class="userName">Фамилия И.</span>
            <ul>
                <li>
                   Выйти
                </li>
            </ul>
        </div>
    </header>
    <div class="questionsPage">
        <form id="questionForm">
            <div class="question">
                <h2>
                    Выберете один правильный ответ<span onclick="change(event)"> &#9998;</span> <span onclick="remove(event)">&#10006;</span>
                </h2>
                <fieldset class="radio">
                    <select size="1" name="type" onchange="changeType(this)">
                        <option selected value="1">Тип 1</option>
                        <option value="2">Тип 2</option>
                        <option value="3">Тип 3</option>
                    </select>
                    <p><input name="radio-question" type="radio" value="first"> Первый ответ<span onclick="change(event)"> &#9998;</span> <span onclick="remove(event)">&#10006;</span></p>
                    <p><input name="radio-question" type="radio" value="second"> Второй ответ<span onclick="change(event)"> &#9998;</span> <span onclick="remove(event)">&#10006;</span></p>
                    <p><input name="radio-question" type="radio" value="third"> Третий ответ<span onclick="change(event)"> &#9998;</span> <span onclick="remove(event)">&#10006;</span></p>
                    <p><span>&#10010;</span></p>
                </fieldset>
            </div>
            <div class="question">
                <h2>
                    Выберете несколько правильных ответов<span onclick="change(event)"> &#9998;</span> <span onclick="remove(event)">&#10006;</span>
                </h2>
                <fieldset class="checkbox">
                    <select size="1" name="type" onchange="changeType(this)">
                        <option value="1">Тип 1</option>
                        <option selected value="2">Тип 2</option>
                        <option value="3">Тип 3</option>
                    </select>
                    <p><input type="checkbox" name="checkbox-question" value="first"> Первый ответ</p>
                    <p><input type="checkbox" name="checkbox-question" value="second"> Второй ответ</p>
                    <p><input type="checkbox" name="checkbox-question" value="third"> Третий ответ</p>
                    <p><input type="checkbox" name="checkbox-question" value="fourth"> Четвертый ответ</p>
                </fieldset>
            </div>
            <div class="question">
                <h2>
                    Обоснуйте Ваш ответ<span onclick="change(event)"> &#9998;</span> <span onclick="remove(event)">&#10006;</span>
                </h2>
                <fieldset class="text">
                    <select size="1" name="type" onchange="changeType(this)">
                        <option value="1">Тип 1</option>
                        <option value="2">Тип 2</option>
                        <option selected value="3">Тип 3</option>
                    </select>
                    <p>
                        <textarea name="text-question" cols="40" rows="3" resize="vertical"></textarea></p>
                    </p>
                </fieldset>
            </div>
            <input type="submit" class="controlBtm" value="Сохранить">
            <button class="controlBtm" onclick="addQuestions(event)">Добавить вопрос</button>
        </form>
    </div>
    <footer>
        © 2002 - 2017. :iTechArt All Rights Reserved.
    </footer>
</body>
</html>